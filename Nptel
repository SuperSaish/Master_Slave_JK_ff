<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NPTEL CIM Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    h1 {
      margin-top: 40px;
      color: #333;
    }
    #start, #quiz, #score {
      background-color: #fff;
      padding: 20px 30px;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 700px;
    }
    .question {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .options label {
      display: block;
      margin: 8px 0;
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #45a049;
    }
    .feedback {
      margin-top: 10px;
      font-weight: bold;
    }
    .correct {
      color: green;
    }
    .incorrect {
      color: red;
    }
    #next-button {
      display: none;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>NPTEL CIM Quiz</h1>
  <div id="start">
    <label>
      <input type="checkbox" id="randomize"> Randomize Questions
    </label><br><br>
    <label>
      Choose Week:
      <select id="week-select">
        <option value="all">All Weeks</option>
        ${[...Array(12).keys()].map(i => `<option value="${i+1}">Week ${i+1}</option>`).join('')}
      </select>
    </label><br><br>
    <button onclick="startQuiz()">Start Quiz</button>
  </div>  

  <div id="quiz">
    <div id="question-container"></div>
    <button id="submit-button" onclick="submitAnswer()">Submit Answer</button>
  </div>  

  <div id="score">
    <h2>Your Score: <span id="final-score"></span></h2>
    <button onclick="location.reload()">Restart</button>
  </div>  

  <script>
    const allQuestions = [
      {"week":1,"question":"When did the idea of “digital manufacturing” gain prominence?","options":["1960s","1970s","1980s","1990s"],"answer":"1970s"},
      {"week":1,"question":"________ is the process of converting raw materials, components or parts into finished goods that meet a customer’s expectations and specifications.","options":["Designing","Manufacturing","Developing","Prototyping"],"answer":"Manufacturing"},
      // Add more questions as needed
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;

    function startQuiz() {
      const randomize = document.getElementById('randomize').checked;
      const week = document.getElementById('week-select').value;

      currentQuestions = week === 'all'
        ? allQuestions
        : allQuestions.filter(q => q.week === Number(week));

      if (randomize) currentQuestions = shuffle(currentQuestions);

      document.getElementById('start').style.display = 'none';
      document.getElementById('quiz').style.display = 'block';

      showQuestion();
    }

    function showQuestion() {
      const container = document.getElementById('question-container');
      const q = currentQuestions[currentIndex];
      container.innerHTML = `
        <div class="question">Q${currentIndex + 1}: ${q.question}</div>
        <div class="options">
          ${q.options.map(opt => `
            <label><input type="radio" name="answer" value="${opt}"> ${opt}</label>
          `).join('')}
        </div>
        <div class="feedback" id="feedback"></div>
        <button id="next-button" onclick="nextQuestion()">Next Question</button>
      `;

      // Reset button states
      document.getElementById('next-button').style.display = 'none';
      document.getElementById('submit-button').disabled = false;
    }

    function submitAnswer() {
      const selected = document.querySelector('input[name="answer"]:checked');
      const feedback = document.getElementById('feedback');
      const submitBtn = document.getElementById('submit-button');

      if (!selected) return alert("Please select an answer.");

      // Disable submit button
      submitBtn.disabled = true;

      const isCorrect = selected.value === currentQuestions[currentIndex].answer;
      if (isCorrect) {
        score++;
        feedback.innerHTML = `<span class="correct">Correct!</span>`;
      } else {
        feedback.innerHTML = `<span class="incorrect">Incorrect! The correct answer is: ${currentQuestions[currentIndex].answer}</span>`;
      }

      document.getElementById('next-button').style.display = 'inline-block';
    }

    function nextQuestion() {
      currentIndex++;
      if (currentIndex < currentQuestions.length) {
        showQuestion();
      } else {
        document.getElementById('quiz').style.display = 'none';
        document.getElementById('score').style.display = 'block';
        document.getElementById('final-score').innerText = `${score} / ${currentQuestions.length}`;
      }
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
  </script>
</body>
</html>
